<template name="Agents">
<div id="dashboard_container">
	<!-- Page Heading -->
	<div class="row">
		<div class="col s12">
			<h6 class="left">Gestion des membres</h6>
			<button class="btn btn-primary addAgent right">Ajouter</button>
		</div>
	</div>
	<!-- /.row -->

	<div class="row">
		<div id="morris-area-chart" class="grid">
			{{#each agents}}
				{{>Agent}}
			{{/each}}
		</div>
	</div>
	<div id="addAgent" class="modal">
		{{>addAgent}}
	</div>
	<div id="editPermission" class="modal">
		<div class="modal-content">
			<h4 class="modal-title">Permissions de {{editName}}</h4>
			<div class="modal-body">
				<form id="editPermForm" action="#">
				{{#each keyOf roles}}
					<div id="{{this}}_perm" class="row">
						<h5 class="col s12 m6 l4">{{displayName this}}</h5>
						{{#with roles this}}
						<div class="col s12 m6 l8 checkboxes">
							<div class="col s12 m6">
								<input id="{{this.name}}Get" data-collection="{{this.name}}" data-method="get" type="checkbox" class="permGet" {{isChecked this.get}}/>
								<label for="{{this.name}}Get">Get</label>
							</div>
							<div class="col s12 m6">
								<input id="{{this.name}}List" data-collection="{{this.name}}" data-method="list" type="checkbox" class="permList" {{isChecked this.list}}/>
								<label for="{{this.name}}List">List</label>
							</div>
							<div class="col s12 m6">
								<input id="{{this.name}}Insert" data-collection="{{this.name}}" data-method="insert" type="checkbox" class="permInsert" {{isChecked this.insert}}/>
								<label for="{{this.name}}Insert">Insert</label>
							</div>
							<div class="col s12 m6">
								<input id="{{this.name}}Update" data-collection="{{this.name}}" data-method="update" type="checkbox" class="permUpdate" {{isChecked this.update}}/>
								<label for="{{this.name}}Update">Update</label>
							</div>
							<div class="col s12 m6">
								<input id="{{this.name}}Remove" data-collection="{{this.name}}" data-method="remove" type="checkbox" class="permRemove" {{isChecked this.remove}}/>
								<label for="{{this.name}}Remove">Remove</label>
							</div>
						</div>
					{{/with}}
					</div>
				{{/each}}
				</form>
			</div>
			<div class="modal-footer">
				<a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
			</div>
		</div>
	</div>
	<div id="deleteUser" class="modal">
	</div>
	<div id="editUser" class="modal">
	</div>
</div>
</template>

<template name="Agent">
	<div class="grid-item usercard col s12 m6 l4">
		<div class="row">
			<div class="card z-depth-2">
				<div class="card-image z-depth-2">
					<img class="bg-img center-block" src="{{ picture }}">
				</div>
				<div class="card-content z-depth-2">
					<img class="ico-img circle responsive-img center-block z-depth-2" src="{{ picture }}">
					<div>
						<span class="card-title grey-text text-darken-4">{{ name }}</span>
					</div>
					<div class="col s12">
						<label class="col s4">username</label>
						<span class="col s8 gray-text text-darken-4">{{ username }}</span>
					</div>
					<div class="col s12">
						<label class="col s4">email</label>
						<span class="col s8 gray-text text-darken-4">{{ email }}</span>
					</div>
					<div class="col s12 button-container">
						<div class="col s4 center"><span class="center btn-floating teal" data-func="#editPermission"><i class="material-icons">vpn_key</i></span></div>
						<div class="col s4 center"><span class="center btn-floating yellow darken-4" data-func="#editUser"><i class="material-icons">settings</i></span></div>
						<div class="col s4 center"><span class="center btn-floating red darken-4" data-func="#deleteUser"><i class="material-icons">delete</i></span></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="addAgent">

	<div class="modal-content">

		<h4 class="modal-title">Ajouter un membre à l'équipe</h4>

		<div class="modal-body">
			
			<p class="text-info">
				Entrez l'identifiant Google du nouveau membre,
				ce dernier recevra un e-mail l'invitant à créer un compte
				et à renseigner ses informations personnelles.
			</p>
			<form class="form-inline"> 
				<div class="row">
					<div class="input-field col s8">
						<input id="inputUsername" type="text" class="validate">
						<label for="inputUsername">Google ID</label>
					</div>
					<button id="button_modal_add_agent" class="btn waves-effect waves-light" type="submit">Ajouter
						<i class="material-icons right">send</i>
					</button>
				</div>
			</form>

		</div>
		<div class="modal-footer">
			<a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
		</div>

	</div>

</template>
